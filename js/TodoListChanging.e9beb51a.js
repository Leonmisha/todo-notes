(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TodoListChanging"],{"20e1":function(t,i,o){"use strict";o.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("form",{staticClass:"todo-list-changing",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"todo-list-head"},[e("h1",[e("input",{directives:[{name:"focus",rawName:"v-focus",value:t.isNew,expression:"isNew"},{name:"model",rawName:"v-model",value:t.todoListLocal.title,expression:"todoListLocal.title"}],staticClass:"todo-list-title",attrs:{required:"",placeholder:"Название заметки"},domProps:{value:t.todoListLocal.title},on:{input:function(i){i.target.composing||t.$set(t.todoListLocal,"title",i.target.value)}}})]),e("div",{staticClass:"todo-list-top-buttons"},[e("BaseButton",{staticClass:"undo-button",attrs:{disabled:t.todoNotChanged},on:{click:t.undoChanges}},[e("img",{staticClass:"icon-button",attrs:{src:o("63b4")}})]),e("BaseButton",{staticClass:"redo-button",attrs:{disabled:!t.redoEnabled},on:{click:t.redoChanges}},[e("img",{staticClass:"icon-button",attrs:{src:o("273e")}})]),e("BaseButton",{staticClass:"delete-button",on:{click:t.deleteList}},[e("img",{staticClass:"icon-button",attrs:{src:o("8add")}})])],1)]),e("div",{staticClass:"todos-container"},[e("TheTodoItemNew",{directives:[{name:"focus",rawName:"v-focus",value:!t.isNew,expression:"!isNew"}],attrs:{callback:t.addTask}}),t._l(t.todoListLocal.tasksList,(function(i){return e("TodoItem",{key:i.id,staticClass:"todo-item",attrs:{item:i,editable:!0,deleteItemAction:t.deleteTask,isFirstChild:i.id===t.todoListLocal.tasksList[0].id}})}))],2),e("BaseButton",{staticClass:"cancel-button",on:{click:t.cancelChanges}},[t._v(" Отменить ")]),e("BaseButton",{staticClass:"save-button",attrs:{type:"button"},on:{click:t.saveChanges}},[t._v(" Сохранить ")])],1)},s=[],n=(o("4de4"),o("7db0"),o("498a"),o("5530")),a=o("2de8"),c=o("82ea"),r=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("form",{staticClass:"todo-item-new",on:{submit:function(t){t.preventDefault()}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodoText,expression:"newTodoText"}],staticClass:"todo-new-text",attrs:{placeholder:"Что нужно сделать?",required:"",maxlength:"125"},domProps:{value:t.newTodoText},on:{input:function(i){i.target.composing||(t.newTodoText=i.target.value)}}}),o("button",{staticClass:"add-item-button",attrs:{tabindex:"-1",type:"submit"},on:{click:t.addTodo}},[t._v("+")])])},d=[],u={name:"TheTodoItemNew",data:function(){return{newTodoText:""}},methods:{addTodo:function(){var t=this,i=this.newTodoText&&this.newTodoText.trim();if(!i)return!1;setTimeout((function(){t.callback(i),t.newTodoText=""}),0)}},props:{callback:{type:Function,required:!0}}},l=u,A=(o("7866"),o("2877")),h=Object(A["a"])(l,r,d,!1,null,"7c7395f6",null),L=h.exports,f={name:"TodoListChanging",components:{TodoItem:a["a"],TheTodoItemNew:L,BaseButton:c["a"]},computed:{id:function(){return this.$route.params.id},todoList:function(){var t=this;return this.$store.getters.TODO_LISTS.find((function(i){return i.id===parseInt(t.id)}))},todoNotChanged:function(){return JSON.stringify(this.todoList)===JSON.stringify(this.todoListLocal)},isNew:function(){return"true"===this.$route.query.new}},data:function(){return{todoListLastChange:null,redoEnabled:!1,todoListLocal:null}},methods:{addTask:function(t){this.todoListLocal.tasksList.push({id:this.todoListLocal.tasksList.length+1,done:!1,text:t})},deleteTask:function(t){this.todoListLocal.tasksList=this.todoListLocal.tasksList.filter((function(i){return i.id!==t}))},deleteList:function(){this.$store.dispatch("SHOW_MODAL",{text:"Вы уверены, что хотите удалить заметку?",callBack:this.handleConfirmation(this._deleteList)})},cancelChanges:function(){this.isNew?this.$store.dispatch("SHOW_MODAL",{text:"Вы уверены, что хотите отменить создание?",callBack:this.handleConfirmation(this._deleteList)}):this.todoNotChanged?this.goHome():this.$store.dispatch("SHOW_MODAL",{text:"Вы уверены, что хотите отменить редактирование?",callBack:this.handleConfirmation(this.goHome)})},undoChanges:function(){if(this.todoNotChanged)return!1;this.todoListLastChange=Object(n["a"])({},this.todoListLocal),this.todoListLocal=JSON.parse(JSON.stringify(this.todoList)),this.redoEnabled=!0},redoChanges:function(){if(null===this.todoListLastChange)return!1;this.todoListLocal=JSON.parse(JSON.stringify(this.todoListLastChange)),this.todoListLastChange=null,this.redoEnabled=!1},saveChanges:function(t){t.preventDefault(),this.todoListLocal.title=this.todoListLocal.title&&this.todoListLocal.title.trim(),this.todoListLocal.title||(this.todoListLocal.title=this.todoList.title),this.updateList(),this.goHome()},handleConfirmation:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(o){o?t():null!==i&&i()}},_deleteList:function(){this.$store.dispatch("DELETE_LIST",this.todoListLocal.id).then(this.goHome())},goHome:function(){this.todoListLastChange=null,this.$router.push({name:"Home"})},updateList:function(){this.$store.dispatch("UPDATE_LIST",this.todoListLocal)}},created:function(){this.todoListLocal=JSON.parse(JSON.stringify(this.todoList))},directives:{focus:{inserted:function(t,i){i.value&&("isNew"===i.expression?(t.focus(),t.select()):t[0].focus())}}}},g=f,C=(o("da38"),Object(A["a"])(g,e,s,!1,null,"78c73fa3",null));i["default"]=C.exports},"273e":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAFXklEQVR4nO2dXWgcVRTHfzX1I7bWaKgftaWiSEVUtIIVFFHUIj4U0YKIRRSroj6IIiiIH48W3wSp+iTqSxWkFFSoFFEisWpp+tBYRI1NpLUfxjSpSdOkGR/ODNldd9f5uHPP7Mz5wWEHJrv53/ln7t577rkTMAzDMAzDMIzS06UtwDPrgJeA24AR4IiqmorzAhDUxCTwiKagKrMA+Jt6Q6LYDJyhJ62a9NLcjCj6geVq6irIUtobEiDfJ3dqCawacQwJgFngRaSLM3IkriFRbAXOVVFaEZIaEgD7gKs0xFaBNIYEwDhwv4Le0pPWkACYA96gepPoXMliSBRfARf4Fl5WXBgSAMPAjZ61lxJXhgTACWCjX/nlw6UhUXwAdPtsRJnIw5AA2AWs9NiO0pCXIQGWcklFnoYEWMolMXkbEoWlXGLiy5AAS7nEwqchAZJyWZ9GaKf2eUuA85GFp96a48Xh+UXMrwJ2Az3Aw541BkjK5RXgVNw3FdWQc4ArgMuByxpiBXC6nrTEfAk8CPwV54eLYMhCYBVwQxg3A9cDp2mKcswfSBe2U1tIM7qAm4DXgD5gCr/9u1ZMAY86uH5OWAjcBbyHTKS0L45mvAOcme1ypmc5MmHa30ZgFWMXcGn6y5qc1UjybdZRA8oYXlIua5CFHO3GdkrMIBWVzgdXK4FPkOVO7UZ2YnzM/BwqE13As8BEARrV6TEAdGdZuL8E2AY8idXGuuAi4GhaQ9YC27EkmmuG08yGHwM+QxJ2hlt+TPqGl9Hva8saO5AJdGyeK4Dossa7JEyYPlUA0WWMCeCBBD4AcAswXQDxZYufgasT+ABILupwAcSXLT5FFtkSsQD4vADiyxSzwOukXOt5vAANKFMcBu5I5EANPcDRAjSiLJE53f5mARpRlkhUA9ws7Xsx8BtwVtwPUWYCGAvjJLJUeqLm/DFkjL/Os64p4Gng/SRvajYzfIZimHEE+cMYCWM/sj/jQHhuDLnYcUpsliJ9uC+GkK1wu5O+sfEOORtpdK8DUXEJgJ+APWEMhK9/OvwdPg35AtgAjLr4sA346VcPIosyTyBp/LzxUbkY7UV0Wr60LUfBQ8gYfJVLwTHJ25BR4B7Xos/DfYrkH2SUcTu6hW95GrIbqah0znqHIqeRDOayPISmIC9DPkK+d3PhbQcCTyKFYCvyEpkS14ZMIxnwXBnMKHIQqccqIi4NGUFKYXNlMelLeOaQ7mlR3iIz4MqQr5FihNxZk1LgGHC3D4EZyWrIHLAJj4/X2JhC5DApFliUyGLIMeA+34I3JRQ5gmym6RTSGrIXnXkTHyYQOQpcqSEyA2kM2YKj8s407IghMECKg1MvsiiSxJAZ4HkdmfPEHfK+qiUwI3ENOQjcqqSxjjgbavrp3Id4xTGkj+JkFv63smQGuE5NXXZ6aN++tyjYzt5x2gverCfNGb/w33YdBx7SFNWKSVqbMUU5nvq8FjGgdkh7jaqiNrR6LnqApEXKwjJkEe5eirFM3ZJDtDbkWkVdlaXVKKtfU1QViVbxJlqc3+JLiCFEhrSqyNjqS4ghRIYcanLu9zAMj7S7Q77xKcQQIkMONDlnhigQGfJrk3NmiCKrqR/uTlKMh5tVliXUGzKoK6e6RF3WOPVf7EMKWgzqyzv31BybIUrUGjJQc2yGKNHqDrH/EatEqztk0rcQQ6g1ZB/zScYpBS0G9YacAr4Lj+0OUaJxE8234avdIUo0GtIXvk77FmIIjYbsRJ7HUaiSmCrRaMhx4Hty3KZltKfZRsztFHvzTalpVho6jZRe7vWsxaD5HfID9c8KMQrAhdoCDMMwDMMwOpp/AUKlruUuARstAAAAAElFTkSuQmCC"},4139:function(t,i,o){},"498a":function(t,i,o){"use strict";var e=o("23e7"),s=o("58a8").trim,n=o("c8d2");e({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},5899:function(t,i){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,i,o){var e=o("1d80"),s=o("5899"),n="["+s+"]",a=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),r=function(t){return function(i){var o=String(e(i));return 1&t&&(o=o.replace(a,"")),2&t&&(o=o.replace(c,"")),o}};t.exports={start:r(1),end:r(2),trim:r(3)}},"63b4":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAFOElEQVR4nO2cTWgdVRSAv5f0J6axFdNWGo1iQeoPpVbBKqKIxUVFRATpQhctQsGFiEVQFFR0E5e68A9XRbQKVtCFohRBLKX+VouiLU0VqWkbW6uJTU1N4uLM2HnJzHszd37OzLzzweFNbnhw7v3ezNx35t4HhmEYhmEYhlF7urUTiOAq4AlgIzAN7NdNp7PZBJwCZgLxsGZCncoC4CWaRfhxAmjopdZ5XATsJlyGH/1q2XUYNwEjtJYxAyzTSrCT2AJM0l6GCcmZPmA78USYkJy5DNhHMhkmJCfuAP4guQwTkjEN4FFgCjcZJiRD+oEPcRdhQjJkLTBMehkmJAPuA/4mGxkmJAULgefJToQJScGFtC+BmJCCuJl4JRATUgBJSiAmJEf6gLfIV4QJiYlrCcSE5ECaEogJaUHSp3DdwLPAYw7vTcs24CQw4f09iXzPARhDniqeAH73Xo977ZUiyaD2A28Ct+WUSx6cAX4FDiIVg2AcoITC4gpZC7wDXJpjLhoMA7uAr7z4EjitmlEMNiOXiSLvF1oxAXwGPAmso2TLpBYCL6M/SJpxzBuD9SjLybMEUtX4DRgCVqYYVyfyLoFUPaaA94EbXAc4Lg3gEWRmot3pqsRO4DqXwW5HH/B2CTpYxZhGykeDiUc9gnOAvSXoWNXjL+BBoCvZ8M9lawk6U6f4BBhIZCBAF7DK9c1GKLcA3yBT5cR0AV9nmY0BwHLgA+RLdWLmIbMF7VO9jjENPB5fhXz7nAbeQL6Z34jtw8iSBnLp+gcpySRmI1IB1f5k1TG2JPDQxCrg+xJ0oG4xidzwnVgM7ChBJ+oWR0kxJW4AD5H/apJOi49IeZ9ej5ShtTtSp3CaDgexcny2MQosCRvouA9dxoDXkXvLupjvMaLp9V53zv6Hy7VsE/AiUpQskveQRwPBT1aPl8cC4Dwvzi04L1cmkIddR4KNrjcXjUUPy5FTvR3diJglyFquAeBi4BKkRD6IDEQZ1nk9AzwVbEhztz8fuYxtSJNRAuIKicsKYM2suIJiKxWjyIcls5UuWewdjBtFfKKXAvcArwCHCujTDFIdyZzbkdWCVRcym8uBp8lXzrt5Jb8SeQ5QJyE+XcCtyHLW2b9UlDZOEzEFzoIe4LWMEy6DkCDLkOVAWS4evCvvpB9ASs51FOIziNxrsigtvVBEwtcjC53rKsTnWuAH0vVtX1HJLkWKaXUWAnKpHsJ9tjkFLCoq2W7gOeTJZF2F+GxA9rC49C+XBXetuBv40zHZqggBWI3bpfp+jWTTPI2sihCQ/ZeHSda/IZVMcd+5WyUhAFeSbB/mNp00z7KVZAu7qyYEZPvfv8Tr38dKOTaRZOtDFYWAlF7i9K+wqW87BpA1S3UVMg/YQ/v+DWslGMZ85Ntqq4Rzq/cUwDW0v3SNqGXXgnuBceYme0AzqYx4ldZCTuql1prVNE+Nx6nW3vgo/AdRUUJKt2c+SA9wJ/KrdCuUc8mSVpXw44p5dSxriBZyWDGvjuZzWsyyUu+HMxKzPaJ9DEyIBjsi2kfBhGjwM/BLSPtRMCFafBrSZmeIImFCRsCEaBEm5GDhWRj/02DuMqKrVTMy+JFmIYvBLlmaBMvtR5DfSjEhihwKHH/rH5gQPYJC9voHJkSPY4Hj7/wDE6LHRODYzpAScMp7HQN+8htNiB7+GbIbWdsLmBBN/DNkV7DRhOjhb/Q0ISVhPrI0aE+w0YTosQiRMR5sNCF69BKynteE6NGL7C5rwoTocQb4QjsJ4ywXaCdgGIZhGEaO/Af+DlfjXIsJ0QAAAABJRU5ErkJggg=="},7866:function(t,i,o){"use strict";var e=o("b690"),s=o.n(e);s.a},"7db0":function(t,i,o){"use strict";var e=o("23e7"),s=o("b727").find,n=o("44d2"),a=o("ae40"),c="find",r=!0,d=a(c);c in[]&&Array(1)[c]((function(){r=!1})),e({target:"Array",proto:!0,forced:r||!d},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},b690:function(t,i,o){},c8d2:function(t,i,o){var e=o("d039"),s=o("5899"),n="​᠎";t.exports=function(t){return e((function(){return!!s[t]()||n[t]()!=n||s[t].name!==t}))}},da38:function(t,i,o){"use strict";var e=o("4139"),s=o.n(e);s.a}}]);
//# sourceMappingURL=TodoListChanging.e9beb51a.js.map